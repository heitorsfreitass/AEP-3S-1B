<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compartilhamento de Bicicletas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a; 
            color: #fff; 
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #fff;
            margin-bottom: 20px;
        }
        #mapa {
            width: 100%;
            height: 400px;
            margin: 20px auto;
            border: 2px solid #444; 
            background-color: #333; 
            position: relative;
            border-radius: 10px;
            overflow: hidden;
        }
        .botao {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 50px; 
            background-color: #444;
            color: white;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .botao:hover {
            background-color: #666; 
            transform: scale(1.05); 
        }
        .botao:active {
            transform: scale(0.95); 
        }
        #listaBicicletas {
            margin-top: 20px;
            font-size: 18px;
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color: #fff; 
        }
        #listaBicicletas ul {
            list-style-type: none;
            padding: 0;
        }
        #listaBicicletas li {
            padding: 10px;
            border-bottom: 1px solid #444; 
        }
        .ponto {
            width: 20px;
            height: 20px;
            background-color: green;
            border-radius: 50%;
            position: absolute;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .ponto.indisponivel {
            background-color: red;
        }
        .ponto:hover {
            transform: translate(-50%, -50%) scale(1.2);
        }
        #notificacao {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1000;
        }
        #notificacao.erro {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container mt-2 mb-5">
        <h1>Plataforma de Compartilhamento de Bicicletas</h1>
        <div class="row">
            <div class="col-md-8">
                <div id="mapa"></div>
                <div class="d-flex justify-content-center">
                    <button class="botao" onclick="exibirBicicletas()"><i class="fas fa-bicycle"></i> Ver Bicicletas Disponíveis</button>
                    <button class="botao" onclick="pegarBicicleta()"><i class="fas fa-hand-paper"></i> Pegar Bicicleta</button>
                    <button class="botao" onclick="devolverBicicleta()"><i class="fas fa-undo"></i> Devolver Bicicleta</button>
                </div>
            </div>
            <div class="col-md-4">
                <div id="listaBicicletas"></div>
            </div>
        </div>
    </div>

    <!-- Notificação -->
    <div id="notificacao"></div>
    
    <script>
        let bicicletasDisponiveis = [
            { id: 1, x: 100, y: 200, nome: "Praça Central", disponivel: true },
            { id: 2, x: 250, y: 150, nome: "Shopping Principal", disponivel: true },
            { id: 3, x: 400, y: 300, nome: "Estádio Municipal", disponivel: true }
        ];

        function atualizarMapa() {
            let mapa = document.getElementById("mapa");
            mapa.innerHTML = ""; 
            bicicletasDisponiveis.forEach(bike => {
                let ponto = document.createElement("div");
                ponto.classList.add("ponto");
                if (!bike.disponivel) {
                    ponto.classList.add("indisponivel");
                }
                ponto.style.left = bike.x + "px";
                ponto.style.top = bike.y + "px";
                ponto.title = `${bike.nome} - ${bike.disponivel ? "Disponível" : "Indisponível"}`;
                ponto.onclick = () => selecionarBicicleta(bike.id);
                mapa.appendChild(ponto);
            });
        }

        function exibirBicicletas() {
            let lista = "<h2>Bicicletas</h2><ul>";
            bicicletasDisponiveis.forEach(bike => {
                lista += `<li>Bicicleta ${bike.id} - ${bike.nome} - ${bike.disponivel ? "<strong>Disponível</strong>" : "<strong>Indisponível</strong>"}</li>`;
            });
            lista += "</ul>";
            document.getElementById("listaBicicletas").innerHTML = lista;
        }

        function selecionarBicicleta(id) {
            let bike = bicicletasDisponiveis.find(b => b.id === id);
            if (bike) {
                mostrarNotificacao(`Bicicleta ${bike.id} - ${bike.nome} - ${bike.disponivel ? "Disponível" : "Indisponível"}`, !bike.disponivel);
            }
        }

        function pegarBicicleta() {
            let id = parseInt(prompt("Digite o ID da bicicleta que deseja pegar:"));
            let bike = bicicletasDisponiveis.find(b => b.id === id && b.disponivel);
            if (bike) {
                bike.disponivel = false;
                atualizarMapa();
                exibirBicicletas();
                mostrarNotificacao(`Você pegou a bicicleta ${bike.id} - ${bike.nome}`);
            } else {
                mostrarNotificacao("ID inválido ou bicicleta indisponível.", true);
            }
        }

        function devolverBicicleta() {
            let id = parseInt(prompt("Digite o ID da bicicleta que deseja devolver:"));
            let bike = bicicletasDisponiveis.find(b => b.id === id && !b.disponivel);
            if (bike) {
                bike.disponivel = true;
                atualizarMapa();
                exibirBicicletas();
                mostrarNotificacao(`Você devolveu a bicicleta ${bike.id} - ${bike.nome}`);
            } else {
                mostrarNotificacao("ID inválido ou bicicleta já está disponível.", true);
            }
        }

        function mostrarNotificacao(mensagem, erro = false) {
            Toastify({
                text: mensagem,
                duration: 3000,
                gravity: erro ? "top" : "bottom", 
                position: "right",
                backgroundColor: erro ? "#dc3545" : "#28a745", 
                stopOnFocus: true, 
                close: true
            }).showToast();
        }

        atualizarMapa();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>